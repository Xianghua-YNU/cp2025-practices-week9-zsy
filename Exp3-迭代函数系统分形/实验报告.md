# 迭代函数系统(IFS)分形实验报告

## 实验目的

1. 理解迭代函数系统(IFS)的基本原理和算法
2. 掌握"混沌游戏"随机迭代方法
3. 实现巴恩斯利蕨和概率树的生成
4. 分析不同参数对分形图形的影响

## 实验过程

### 1. 核心算法实现

**IFS参数定义**:
- 巴恩斯利蕨: 4个仿射变换(茎干、小叶片、左右大叶片)
- 概率树: 3个仿射变换(树干、左右分支)

**混沌游戏算法**:
1. 初始化起始点
2. 随机选择变换(按概率)
3. 应用仿射变换生成新点
4. 重复迭代生成点集

### 2. 分形实现

**巴恩斯利蕨参数**:
- 茎干变换: 概率0.01
- 小叶片变换: 概率0.85
- 左右大叶片变换: 各概率0.07

**概率树参数**:
- 树干变换: 概率0.10
- 左右分支变换: 各概率0.45

### 3. 遇到的问题与解决

(请在此描述实现过程中遇到的问题及解决方法)
A:问题：生成的图像过于稀疏或过于密集
  解决方法：调整迭代次数和跳过初始点的数量。通过增加迭代次数（num_points）生成更多的点，使图像更密集。
  
## 结果展示
### 1. 巴恩斯利蕨
![image](https://github.com/user-attachments/assets/a5afcdf0-9fe3-4787-85d9-23af32f4a891)

- 展示不同变换对应的叶片部分
  A:T1：生成主茎，对应蕨叶的主轴部分。T2：生成逐渐变小的叶片，构成蕨叶的主体。T3：生成左侧较大的叶片。T4：生成右侧较大的叶片。
- 分析概率参数对叶片密度的影响
  A:T1 概率（0.01）：低概率使主茎细长，增加其概率会使主茎变粗。T2 概率（0.85）：高概率使主体叶片密集，减少其概率会降低主体密度。T3 和 T4 概率（0.07）：中等概率使两侧叶片适度分布，增加会使两侧叶片更茂密。

### 2. 概率树 
![image](https://github.com/user-attachments/assets/b373c7af-18d2-4de3-9bc4-2f727947f1f6)

- 展示分支结构
  A:T1：生成树干，是树的主轴部分。T2：生成左分支，构成树的左侧分支。T3：生成右分支，构成树的右侧分支。
- 分析变换参数对树形的影响
  A:T1 的缩放参数（a 和 d）：控制树干的长度和粗细。T2 和 T3 的旋转参数（b 和 c）：控制分支的生长角度。平移参数（e 和 f）：控制分支的起始位置。
## 分析与思考

1. **IFS特性分析**
   - 仿射变换参数对图形各部分的影响
     A:每个仿射变换的参数（a, b, c, d）控制缩放、旋转和剪切，平移参数（e, f）控制位置。通过调整这些参数，可以改变分形的形状和结构。
   - 概率参数与图形密度的关系
     A:概率参数决定了每个变换被选中的频率，从而影响图形的密度分布。高概率的变换会在图像中占据更多空间，使对应部分更密集。

2. **参数实验**
   - 修改概率参数的效果
     A:通过调整概率参数，可以改变分形的密度分布。
   - 调整变换参数的效果
     A:通过调整仿射变换的参数，可以改变分形的形状和结构。

3. **扩展思考**
   - 如何设计新的IFS规则生成其他分形
     A:可以通过定义新的仿射变换及其概率来设计新的 IFS 规则。
   - 添加颜色渐变效果的方法
     A:可以在绘制时根据迭代次数或位置信息为点添加颜色渐变效果，使图像更加生动。
   - 性能优化方案(减少点数同时保持视觉效果)
     A:可以通过调整概率参数，使高概率变换生成更多点，低概率变换生成较少点，从而减少总点数但保持视觉效果。

4. **算法比较**
   - IFS与其他分形生成方法的对比
     A:IFS 方法通过迭代应用仿射变换生成分形，具有简单高效的特点。与如 L-system相比，IFS 更适合生成基于几何变换的分形。
   - 随机迭代与确定性迭代的差异
     A:随机迭代（如本文实现）通过概率选择变换，适合生成统计意义上的分形；确定性迭代通过依次应用所有变换，适合生成精确的分形结构。

**注：请在每一部分补充你自己的实验内容、图像、分析和关键代码。**
